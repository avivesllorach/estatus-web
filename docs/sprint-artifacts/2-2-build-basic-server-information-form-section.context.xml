<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>2</epicId>
    <storyId>2.2</storyId>
    <title>Build Basic Server Information Form Section</title>
    <status>drafted</status>
    <generatedAt>2025-11-19</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/2-2-build-basic-server-information-form-section.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to see and edit basic server information</iWant>
    <soThat>I can update server details like name, IP, and DNS address</soThat>
    <tasks>
      - Task 1: Create FormSection component (white card wrapper with title header, padding, shadow)
      - Task 2: Create FormRow component (2-column CSS Grid layout with 16px gap)
      - Task 3: Create FormGroup component (label + input wrapper with optional error/helper text)
      - Task 4: Create BasicServerInfoSection component (2x2 grid: Server ID/Name, IP/DNS)
      - Task 5: Integrate BasicServerInfoSection into MainPanel (replace placeholder)
      - Task 6: Test form rendering and data flow (visual verification, state management, build)
    </tasks>
  </story>

  <acceptanceCriteria>
    1. Basic Information form section displays with 2x2 field grid (Server ID disabled/gray, Server Name editable, IP Address editable/monospace, DNS Address editable)
    2. All inputs use shadcn/ui Input component with 6px border radius, gray border, blue focus ring, 14px font, labels above (14px semibold)
    3. Required fields show asterisk (*) in label
    4. Current server values are pre-populated in the form
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc path="docs/architecture.md" title="Configuration UI Architecture" section="Component Architecture (section 4)" snippet="Epic 2 component hierarchy defines FormSection (white cards), FormRow (2-column grid), FormGroup (label + input + error wrapper) as reusable form components. MainPanel integrates PanelHeader + scrollable content area." />
      <doc path="docs/architecture.md" title="Configuration UI Architecture" section="Data Architecture (section 5)" snippet="ServerConfig interface defines: id, name, ip, dns (string fields), consecutiveSuccesses/Failures (numbers), optional snmpConfig and netappConfig objects." />
      <doc path="docs/architecture.md" title="Configuration UI Architecture" section="Implementation Patterns (section 9)" snippet="Form state management pattern: MainPanel maintains form state via useState, child components receive data via props and emit changes via onChange callback. useEffect synchronizes form state on server selection change." />
      <doc path="docs/epics.md" title="Epic Breakdown" section="Story 2.2" snippet="Build Basic Information form section with Server ID (disabled), Server Name, IP Address (monospace), DNS Address fields in 2x2 grid layout. Uses shadcn/ui Input component with labels showing asterisks for required fields." />
      <doc path="docs/sprint-artifacts/tech-spec-epic-2.md" title="Epic 2 Technical Specification" section="2.3 Component Breakdown" snippet="Basic Information section fields: Server ID (disabled, non-editable, gray background), Server Name (required, text input), IP Address (required, monospace font), DNS Address (required, text input). Layout: 2x2 grid (two rows, two columns)." />
      <doc path="docs/sprint-artifacts/2-1-create-server-edit-form-layout-with-panel-header.md" title="Story 2.1 Completion Notes" section="Learnings from Previous Story" snippet="PanelHeader component created with sticky positioning. MainPanel renders PanelHeader + scrollable content area (bg-gray-50, p-6). Placeholder text ready to be replaced with BasicServerInfoSection. Build passed with 0 TypeScript errors." />
    </docs>

    <code>
      <artifact path="src/components/config/MainPanel.tsx" kind="component" symbol="MainPanel" lines="1-52" reason="Integration point for BasicServerInfoSection - contains scrollable content area (line 28-31) with placeholder text to be replaced. Manages form state and handles field changes." />
      <artifact path="src/components/config/PanelHeader.tsx" kind="component" symbol="PanelHeader" lines="1-40" reason="Sticky header component above form content. Provides title and action buttons (Delete/Cancel/Save). Interface includes isDirty prop for unsaved changes indicator (Story 2.9)." />
      <artifact path="src/components/ui/input.tsx" kind="ui-component" symbol="Input" lines="1-23" reason="shadcn/ui Input component to be used for all form fields. Supports className override for custom styling (e.g., font-mono for IP Address, bg-gray-100 for disabled Server ID)." />
      <artifact path="src/components/ui/label.tsx" kind="ui-component" symbol="Label" lines="1-25" reason="shadcn/ui Label component from Radix UI. Used in FormGroup wrapper to display field labels with asterisks for required fields. Default styling: text-sm font-medium." />
      <artifact path="backend/src/types/server.ts" kind="type-definition" symbol="ServerConfig" lines="25-32" reason="Backend ServerConfig interface defines server data structure. Frontend will use similar interface (note: backend uses 'dnsAddress' field, frontend may use 'dns' for consistency with existing code)." />
    </code>

    <dependencies>
      <node>
        <dependency name="react" version="^18.2.0" />
        <dependency name="react-dom" version="^18.2.0" />
        <dependency name="react-router-dom" version="^7.9.6" />
        <dependency name="@radix-ui/react-label" version="^2.1.8" />
        <dependency name="typescript" version="^5.2.2" />
        <dependency name="tailwindcss" version="^3.4.3" />
        <dependency name="class-variance-authority" version="^0.7.1" />
        <dependency name="clsx" version="^2.1.1" />
        <dependency name="tailwind-merge" version="^3.4.0" />
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    - Use shadcn/ui components exclusively (Input, Label from @/components/ui)
    - Follow established TypeScript interface pattern for all component props
    - Maintain additive changes - do not break existing PanelHeader or MainPanel functionality
    - Use Tailwind utility classes for all styling (no custom CSS files)
    - FormSection: white background (bg-white), rounded-lg, shadow-sm, p-6 padding
    - FormRow: CSS Grid with 2 columns (grid grid-cols-2 gap-4)
    - FormGroup: flex flex-col gap-2, Label with conditional asterisk, optional error/helperText
    - Server ID field must be disabled with bg-gray-100 and cursor-not-allowed
    - IP Address field must use font-mono class for monospace font
    - All labels must be 14px (text-sm), semibold, gray-900
    - All inputs must be 14px (text-sm) with gray border and blue focus ring
    - Required fields show red asterisk (*) with ml-1 margin
    - Form state managed in MainPanel parent component, not in form components
    - Components must be reusable (FormSection, FormRow, FormGroup used in Stories 2.4-2.5)
  </constraints>

  <interfaces>
    <interface name="FormSectionProps" kind="React Component Props" signature="{ title: string, children: ReactNode }" path="To be created: src/components/config/forms/shared/FormSection.tsx" />
    <interface name="FormRowProps" kind="React Component Props" signature="{ children: ReactNode }" path="To be created: src/components/config/forms/shared/FormRow.tsx" />
    <interface name="FormGroupProps" kind="React Component Props" signature="{ label: string, required?: boolean, children: ReactNode, error?: string, helperText?: string }" path="To be created: src/components/config/forms/shared/FormGroup.tsx" />
    <interface name="BasicServerInfoSectionProps" kind="React Component Props" signature="{ server: ServerConfig, onChange: (field: string, value: string) => void }" path="To be created: src/components/config/forms/BasicServerInfoSection.tsx" />
    <interface name="ServerConfig" kind="TypeScript Interface" signature="{ id: string, name: string, ip: string, dns: string, consecutiveSuccesses: number, consecutiveFailures: number, snmpConfig?: {...}, netappConfig?: {...} }" path="backend/src/types/server.ts:25-32 (reference), frontend types to be created in src/types/server.ts" />
    <interface name="MainPanelProps" kind="React Component Props (existing)" signature="{ selectedServerId: string | null, selectedGroupId: string | null, selectedServerName?: string | null, children?: ReactNode }" path="src/components/config/MainPanel.tsx:5-10" />
  </interfaces>

  <tests>
    <standards>
      Per PRD requirements, Epic 1/2 use manual testing only (no automated tests required for MVP UI foundation). Build verification and TypeScript compilation serve as baseline quality gates. Test focus: visual design verification, field behavior (disabled/editable states), data pre-population, state management (form updates on server selection change), build success with zero TypeScript errors.
    </standards>

    <locations>
      - Manual testing via browser: http://localhost:5173/config
      - Build verification: npm run build (frontend)
      - TypeScript compilation check: tsc (no errors required)
    </locations>

    <ideas>
      - AC1: Verify 2x2 grid layout with Server ID (disabled/gray), Server Name (editable), IP Address (editable/monospace), DNS Address (editable)
      - AC2: Verify shadcn/ui Input styling (6px border radius, gray border, blue focus ring, 14px font, labels 14px semibold)
      - AC3: Verify required field asterisks (*) appear in labels for all four fields
      - AC4: Verify current server values pre-populate form fields when server selected from sidebar
      - State Management: Type in editable fields → verify onChange updates form state, select different server → verify form resets to new values
      - Edge Cases: Server with missing dns field → verify shows empty input (not undefined), rapidly switching servers → verify form updates correctly
      - Build Verification: Run npm run build → verify 0 TypeScript errors, 0 ESLint warnings
    </ideas>
  </tests>
</story-context>
