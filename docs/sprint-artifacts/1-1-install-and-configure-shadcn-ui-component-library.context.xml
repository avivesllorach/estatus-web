<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1</storyId>
    <title>Install and Configure shadcn/ui Component Library</title>
    <status>drafted</status>
    <generatedAt>2025-11-18</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/1-1-install-and-configure-shadcn-ui-component-library.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>developer</asA>
    <iWant>shadcn/ui integrated into the project with the Neutral color theme</iWant>
    <soThat>I have accessible, admin-optimized UI components ready for building the config interface</soThat>
    <tasks>
      - Task 1: Install shadcn/ui via CLI (AC: 1, 2, 3, 4)
        - Run `npx shadcn-ui@latest init` and configure with Neutral theme
        - Select React 18 + Tailwind CSS configuration
        - Verify components directory created at `src/components/ui/`
        - Install required components: Button, Input, Label, Checkbox, Select, Dialog, Toast, Collapsible, ScrollArea, Separator

      - Task 2: Configure Tailwind CSS with Neutral color palette (AC: 3, 5)
        - Update `tailwind.config.ts` with shadcn/ui color variables
        - Verify Neutral theme colors are set (Primary: #2563eb, Success: #16a34a, Destructive: #dc2626, Border: #d4d4d4, Background: #fafafa)
        - Ensure Aller font family remains configured in Tailwind
        - Verify existing dashboard styles are not affected

      - Task 3: Verify component installation (AC: 2, 4)
        - Check that all required components exist in `src/components/ui/`
        - Test render a sample component (e.g., Button) to verify setup
        - Verify component variants work (primary, secondary, destructive for Button)
    </tasks>
  </story>

  <acceptanceCriteria>
    1. Given the project uses React 18 + Tailwind CSS, When I install shadcn/ui via CLI, Then shadcn/ui is configured with Neutral color palette (per UX Design spec)

    2. And the following components are installed: Input, Label, Button, Checkbox, Select, Dialog, Toast, Collapsible, ScrollArea, Separator

    3. And Tailwind config includes shadcn/ui color variables: Primary (#2563eb), Success (#16a34a), Destructive (#dc2626), Border (#d4d4d4), Background (#fafafa)

    4. And components live in `src/components/ui/` directory

    5. And the Aller font family is maintained for consistency with existing dashboard
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>UX Design Specification</title>
        <section>1.1 Design System Choice</section>
        <snippet>shadcn/ui provides production-ready, accessible React components specifically designed for admin interfaces. Components include: Input, Select, Checkbox, Label, Dialog, Toast, Collapsible, ScrollArea, Separator. CLI-based installation adds only needed components to /src/components/ui/.</snippet>
      </doc>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>UX Design Specification</title>
        <section>3.1 Color System - Neutral Theme</section>
        <snippet>Primary (#2563eb / Blue 600) for actions and focus states, Success (#16a34a / Green 600) for positive feedback, Destructive (#dc2626 / Red 600) for delete actions, Border (#d4d4d4 / Gray 300) for dividers, Background (#fafafa / Gray 50) for surfaces.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic 1 Technical Specification</title>
        <section>Dependencies and Integrations</section>
        <snippet>shadcn/ui (latest) - Component library copied into project via CLI. @radix-ui/react-* (latest) - Primitive components auto-installed. class-variance-authority, clsx, tailwind-merge auto-installed with shadcn/ui.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document</title>
        <section>Technology Stack</section>
        <snippet>Frontend uses React 18, Tailwind CSS 3.4+, TypeScript 5.2+, Vite 4.5+. shadcn/ui integrates as component library built on Radix UI primitives. All components customizable via Tailwind utility classes.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>tailwind.config.js</path>
        <kind>configuration</kind>
        <symbol>fontFamily</symbol>
        <lines>9-12</lines>
        <reason>Current Tailwind config with Aller font family that must be preserved. shadcn/ui color variables will be added to theme.extend while maintaining existing font configuration.</reason>
      </artifact>
      <artifact>
        <path>package.json</path>
        <kind>configuration</kind>
        <symbol>dependencies</symbol>
        <lines>12-15</lines>
        <reason>Current dependencies show React 18.2.0 and Tailwind CSS 3.4.3 already installed, confirming compatibility with shadcn/ui requirements.</reason>
      </artifact>
      <artifact>
        <path>src/App.tsx</path>
        <kind>component</kind>
        <symbol>App</symbol>
        <lines>1-7</lines>
        <reason>Root component that renders Dashboard. Should remain unchanged during shadcn/ui installation to verify no breaking changes to existing dashboard functionality.</reason>
      </artifact>
    </code>
    <dependencies>
      <node>
        <current>
          <package>react</package>
          <version>^18.2.0</version>
        </current>
        <current>
          <package>react-dom</package>
          <version>^18.2.0</version>
        </current>
        <current>
          <package>tailwindcss</package>
          <version>^3.4.3</version>
        </current>
        <current>
          <package>typescript</package>
          <version>^5.2.2</version>
        </current>
        <current>
          <package>vite</package>
          <version>^4.5.3</version>
        </current>
        <to-install>
          <package>shadcn/ui</package>
          <version>latest</version>
          <method>npx shadcn-ui@latest init</method>
        </to-install>
        <to-install>
          <package>@radix-ui/react-*</package>
          <version>latest</version>
          <method>auto-installed with shadcn/ui</method>
        </to-install>
        <to-install>
          <package>class-variance-authority</package>
          <version>latest</version>
          <method>auto-installed with shadcn/ui</method>
        </to-install>
        <to-install>
          <package>clsx</package>
          <version>latest</version>
          <method>auto-installed with shadcn/ui</method>
        </to-install>
        <to-install>
          <package>tailwind-merge</package>
          <version>latest</version>
          <method>auto-installed with shadcn/ui</method>
        </to-install>
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>shadcn/ui components must be installed to src/components/ui/ directory - this is the standard location per shadcn/ui conventions</constraint>
    <constraint>Tailwind config must maintain existing Aller font family configuration - do not remove or override fontFamily.sans or fontFamily.aller settings</constraint>
    <constraint>Neutral color theme required per UX Design spec - use Blue 600 for primary, Green 600 for success, Red 600 for destructive</constraint>
    <constraint>Existing Dashboard component must remain functional - verify dashboard renders correctly after shadcn/ui installation</constraint>
    <constraint>CSS variables approach for theming - shadcn/ui should use CSS custom properties (--primary, --border, etc.) defined in global styles</constraint>
    <constraint>No breaking changes to existing Tailwind utility classes - existing dashboard styles use custom animations and should continue working</constraint>
    <constraint>Import alias should be @/components for consistency with TypeScript path mapping</constraint>
  </constraints>
  <interfaces>
    <interface>
      <name>shadcn/ui CLI</name>
      <kind>CLI tool</kind>
      <signature>npx shadcn-ui@latest init - Initializes shadcn/ui with interactive prompts</signature>
      <path>External CLI (npm package)</path>
    </interface>
    <interface>
      <name>shadcn/ui CLI - Add Components</name>
      <kind>CLI tool</kind>
      <signature>npx shadcn-ui@latest add [component-names] - Installs specific components to src/components/ui/</signature>
      <path>External CLI (npm package)</path>
    </interface>
  </interfaces>
  <tests>
    <standards>
      Per Tech Spec section "Test Strategy Summary", this project uses Vitest + React Testing Library for unit tests, MSW for integration tests, and Playwright for E2E tests. All tests should verify accessibility (WCAG AA), keyboard navigation, and component functionality. Test files should be created alongside components in __tests__ directories.
    </standards>
    <locations>
      - tests/ - E2E tests using Playwright
      - src/components/**/__tests__/ - Unit tests for components
      - Verification of shadcn/ui components can be done via manual inspection of src/components/ui/ directory
    </locations>
    <ideas>
      <test ac="1">Verify shadcn/ui initialization: Check that components.json exists and contains Neutral theme configuration</test>
      <test ac="2">Verify component installation: Check that src/components/ui/ contains all required components (button.tsx, input.tsx, label.tsx, checkbox.tsx, select.tsx, dialog.tsx, toast.tsx, collapsible.tsx, scroll-area.tsx, separator.tsx)</test>
      <test ac="3">Verify Tailwind color variables: Inspect global CSS or Tailwind config to confirm --primary, --success, --destructive, --border, --background variables are defined with correct hex values</test>
      <test ac="4">Directory structure test: Automated check that src/components/ui/ directory exists and contains .tsx files</test>
      <test ac="5">Font family preservation test: Verify tailwind.config.js still contains fontFamily.sans: ['Aller', ...] after shadcn/ui installation</test>
      <test>Integration test: Import Button component and render with different variants (default, secondary, destructive) to verify theming works</test>
      <test>Visual regression test: Compare existing Dashboard before/after shadcn/ui installation to ensure no styling regressions</test>
    </ideas>
  </tests>
</story-context>
